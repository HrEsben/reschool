"use client";

import { useState, useEffect } from 'react';
import {
  Box,
  Button,
  Text,
  VStack,
  HStack,
  Flex,
  Heading,
  Input,
  Textarea,
  Badge,
  Grid,
  GridItem,
  useBreakpointValue,
  IconButton,
} from '@chakra-ui/react';
import { showToast } from '@/components/ui/simple-toast';
import { DialogManager } from '@/components/ui/dialog-manager';
import { SettingsIcon, TrashIcon } from '@/components/ui/icons';
import { ToggleTip } from '@/components/ui/toggle-tip';
import { useCreateSengetiderEntry } from '@/lib/queries';
import { Sengetider, SengetiderEntry, SengetiderWithLatestEntry } from '@/lib/database-service';
        <DialogManager
          trigger={<div style={{ display: 'none' }} />}
          title={`Registrer sengetid${selectedDate ? ` - ${selectedDate.toLocaleDateString('da-DK')}` : ''}`}
          type="default"
          isOpen={showDateEntryDialog}
          onOpenChange={setShowDateEntryDialog}
          primaryAction={{
            label: dateEntryLoading ? "Registrerer..." : "Registrer",
            onClick: handleRecordDateEntry,
            isLoading: dateEntryLoading,
            colorScheme: "sage",
            disabled: !datePuttetid.trim()
          }}
          secondaryAction={{
            label: "Annuller",
            onClick: () => {
              setShowDateEntryDialog(false);
              setDatePuttetid('');
              setDateSovKl('');
              setDateVaagnede('');
              setDateNotes('');
            },
            colorScheme: "gray"
          }}
        >
          <VStack gap={4} align="stretch">
            <Grid templateColumns="repeat(1, 1fr)" gap={4}>
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Puttetid *</Text>
                <Input
                  type="time"
                  value={datePuttetid}
                  onChange={(e) => setDatePuttetid(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
              
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Sov kl.</Text>
                <Input
                  type="time"
                  value={dateSovKl}
                  onChange={(e) => setDateSovKl(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
              
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Vågnede</Text>
                <Input
                  type="time"
                  value={dateVaagnede}
                  onChange={(e) => setDateVaagnede(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
            </Grid>
            
            <VStack align="start" gap={2}>
              <Text fontSize="sm" fontWeight="medium">Noter (valgfrit)</Text>
              <Textarea
                value={dateNotes}
                onChange={(e) => setDateNotes(e.target.value)}
                placeholder="Skriv eventuelle noter om søvnen..."
                size="sm"
                borderColor="cream.300"
                borderRadius="lg"
                bg="cream.25"
                _focus={{ 
                  borderColor: "sage.400", 
                  boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                  bg: "white"
                }}
                rows={3}
              />
            </VStack>
          </VStack>
        </DialogManager>'@/lib/database-service';

interface SengetiderCardProps {
  sengetider: SengetiderWithLatestEntry;
  onEntryRecorded: () => void;
  onSengetiderDeleted: () => void;
  onSengetiderEdit?: (sengetider: SengetiderWithLatestEntry) => void;
  isUserAdmin: boolean;
  childName: string;
}

export function SengetiderCard({
  sengetider, 
  onEntryRecorded, 
  onSengetiderDeleted, 
  onSengetiderEdit, 
  isUserAdmin,
  childName
}: SengetiderCardProps) {
  const [puttetid, setPuttetid] = useState('');
  const [sovKl, setSovKl] = useState('');
  const [vaagnede, setVaagnede] = useState('');
  const [notes, setNotes] = useState('');
  const [loading, setLoading] = useState(false);
  const [deletingSengetider, setDeletingSengetider] = useState(false);
  const [currentWeekEntries, setCurrentWeekEntries] = useState<SengetiderEntry[]>([]);
  const [showDeleteDialog, setShowDeleteDialog] = useState(false);
  const [weekOffset, setWeekOffset] = useState(0); // 0 = current week, -1 = last week, etc.
  const [selectedDate, setSelectedDate] = useState<Date | null>(null);
  const [showDateEntryDialog, setShowDateEntryDialog] = useState(false);
  const [datePuttetid, setDatePuttetid] = useState('');
  const [dateSovKl, setDateSovKl] = useState('');
  const [dateVaagnede, setDateVaagnede] = useState('');
  const [dateNotes, setDateNotes] = useState('');
  const [dateEntryLoading, setDateEntryLoading] = useState(false);

  // Get current week dates (Monday to Sunday) with offset support
  const getCurrentWeekDates = (offset: number = 0) => {
    const today = new Date();
    today.setDate(today.getDate() + (offset * 7)); // Apply week offset
    const currentDay = today.getDay();
    const firstDayOfWeek = new Date(today);
    firstDayOfWeek.setDate(today.getDate() - (currentDay === 0 ? 6 : currentDay - 1));
    
    const weekDates = [];
    for (let i = 0; i < 7; i++) {
      const date = new Date(firstDayOfWeek);
      date.setDate(firstDayOfWeek.getDate() + i);
      weekDates.push(date);
    }
    return weekDates;
  };

  const weekDates = getCurrentWeekDates(weekOffset);
  const isMobile = useBreakpointValue({ base: true, md: false });

  // Load current week entries
  useEffect(() => {
    const loadCurrentWeekEntries = async () => {
      try {
        const response = await fetch(`/api/sengetider/${sengetider.id}/entries`);
        if (response.ok) {
          const data = await response.json();
          // Filter for current week
          const weekStart = weekDates[0].toISOString().split('T')[0];
          const weekEnd = weekDates[6].toISOString().split('T')[0];
          
          const filteredEntries = data.entries.filter((entry: SengetiderEntry) => {
            return entry.entryDate >= weekStart && entry.entryDate <= weekEnd;
          });
          
          setCurrentWeekEntries(filteredEntries);
        }
      } catch (error) {
        console.error('Error loading week entries:', error);
      }
    };

    loadCurrentWeekEntries();
  }, [sengetider.id, weekDates, weekOffset]);

  // Format time for display
  const formatTime = (timeString: string | null) => {
    if (!timeString) return '-';
    return timeString.substring(0, 5); // HH:MM
  };

  // Get entry for specific date
  const getEntryForDate = (date: Date) => {
    const dateString = date.toISOString().split('T')[0];
    return currentWeekEntries.find(entry => entry.entryDate === dateString);
  };

  // Handle recording new entry
  const handleRecordEntry = async () => {
    if (!puttetid.trim()) {
      showToast({
        title: 'Fejl',
        description: 'Puttetid er påkrævet',
        type: 'error',
        duration: 3000,
      });
      return;
    }

    setLoading(true);
    try {
      const today = new Date().toISOString().split('T')[0];
      
      const response = await fetch(`/api/sengetider/${sengetider.id}/entries`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          entryDate: today,
          puttetid: puttetid || null,
          sovKl: sovKl || null,
          vaagnede: vaagnede || null,
          notes: notes || null,
        }),
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error || 'Failed to record entry');
      }

      showToast({
        title: 'Succes',
        description: 'Sengetid registreret',
        type: 'success',
        duration: 3000,
      });
      
      // Reset form
      setPuttetid('');
      setSovKl('');
      setVaagnede('');
      setNotes('');
      
      onEntryRecorded();
      
      // Reload current week entries
      const updatedResponse = await fetch(`/api/sengetider/${sengetider.id}/entries`);
      if (updatedResponse.ok) {
        const data = await updatedResponse.json();
        const weekStart = weekDates[0].toISOString().split('T')[0];
        const weekEnd = weekDates[6].toISOString().split('T')[0];
        
        const filteredEntries = data.entries.filter((entry: SengetiderEntry) => {
          return entry.entryDate >= weekStart && entry.entryDate <= weekEnd;
        });
        
        setCurrentWeekEntries(filteredEntries);
      }
      
    } catch (error) {
      showToast({
        title: 'Fejl',
        description: error instanceof Error ? error.message : 'Der opstod en fejl',
        type: 'error',
        duration: 3000,
      });
    } finally {
      setLoading(false);
    }
  };

  // Navigation functions
  const goToPreviousWeek = () => {
    setWeekOffset(prev => prev - 1);
  };

  const goToNextWeek = () => {
    setWeekOffset(prev => prev + 1);
  };

  const goToCurrentWeek = () => {
    setWeekOffset(0);
  };

  // Handle clicking on a day to register entry
  const handleDayClick = (date: Date) => {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    // Only allow registration for today and past dates
    if (date > today) {
      showToast({
        title: 'Ikke tilladt',
        description: 'Du kan ikke registrere sengetider for fremtidige datoer',
        type: 'warning',
        duration: 3000,
      });
      return;
    }

    setSelectedDate(date);
    
    // Pre-fill form if entry exists for this date
    const existingEntry = getEntryForDate(date);
    if (existingEntry) {
      setDatePuttetid(existingEntry.puttetid || '');
      setDateSovKl(existingEntry.sovKl || '');
      setDateVaagnede(existingEntry.vaagnede || '');
      setDateNotes(existingEntry.notes || '');
    } else {
      setDatePuttetid('');
      setDateSovKl('');
      setDateVaagnede('');
      setDateNotes('');
    }
    
    setShowDateEntryDialog(true);
  };

  // Handle recording entry for specific date
  const handleRecordDateEntry = async () => {
    if (!selectedDate || !datePuttetid.trim()) {
      showToast({
        title: 'Fejl',
        description: 'Puttetid er påkrævet',
        type: 'error',
        duration: 3000,
      });
      return;
    }

    setDateEntryLoading(true);
    try {
      const dateString = selectedDate.toISOString().split('T')[0];
      
      const response = await fetch(`/api/sengetider/${sengetider.id}/entries`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          entryDate: dateString,
          puttetid: datePuttetid || null,
          sovKl: dateSovKl || null,
          vaagnede: dateVaagnede || null,
          notes: dateNotes || null,
        }),
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error || 'Failed to record entry');
      }

      showToast({
        title: 'Succes',
        description: `Sengetid registreret for ${selectedDate.toLocaleDateString('da-DK')}`,
        type: 'success',
        duration: 3000,
      });
      
      // Reset form
      setDatePuttetid('');
      setDateSovKl('');
      setDateVaagnede('');
      setDateNotes('');
      setShowDateEntryDialog(false);
      onEntryRecorded();
      
    } catch (error) {
      showToast({
        title: 'Fejl',
        description: error instanceof Error ? error.message : 'Der opstod en fejl',
        type: 'error',
        duration: 3000,
      });
    } finally {
      setDateEntryLoading(false);
    }
  };

  const handleDeleteSengetider = async () => {
    setDeletingSengetider(true);
    try {
      const response = await fetch(`/api/sengetider/${sengetider.id}`, {
        method: 'DELETE',
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error || 'Failed to delete sengetider');
      }

      showToast({
        title: 'Succes',
        description: 'Sengetider-værktøjet blev slettet',
        type: 'success',
        duration: 3000,
      });
      onSengetiderDeleted();
    } catch (error) {
      showToast({
        title: 'Fejl',
        description: error instanceof Error ? error.message : 'Der opstod en fejl',
        type: 'error',
        duration: 3000,
      });
    } finally {
      setDeletingSengetider(false);
      setShowDeleteDialog(false);
    }
  };

  // Week day names in Danish
  const dayNames = ['Man', 'Tir', 'Ons', 'Tor', 'Fre', 'Lør', 'Søn'];

  return (
    <Box
      bg="bg.surface"
      borderRadius="xl"
      border="1px solid"
      borderColor="border.muted"
      p={{ base: 4, md: 6 }}
      position="relative"
    >
      <VStack gap={6} align="stretch">
        {/* Header */}
        <Flex justify="space-between" align="center" wrap="wrap" gap={2}>
          <VStack align="start" gap={1}>
            <Heading size="lg" color="sage.600">Sengetider for {childName}</Heading>
            {sengetider.description && (
              <Text fontSize="sm" color="gray.600">
                {sengetider.description}
              </Text>
            )}
            <HStack gap={1}>
              <Badge colorScheme="blue" fontSize="xs">
                Sengetider
              </Badge>
              {!sengetider.isPublic && (
                <Badge colorScheme="orange" fontSize="xs" variant="outline">
                  Privat
                </Badge>
              )}
            </HStack>
          </VStack>
          
          {isUserAdmin && (
            <HStack gap={2}>
              <Button
                size="sm"
                variant="outline"
                onClick={() => onSengetiderEdit?.(sengetider)}
              >
                <SettingsIcon />
                Indstillinger
              </Button>
              <Button
                size="sm"
                variant="outline"
                colorScheme="red"
                loading={deletingSengetider}
                onClick={() => setShowDeleteDialog(true)}
              >
                <TrashIcon />
                Slet
              </Button>
            </HStack>
          )}
        </Flex>

        {/* Current Week View */}
        <VStack gap={4} align="stretch">
          <Flex justify="space-between" align="center">
            <Heading size="md" color="gray.700">
              {weekOffset === 0 ? 'Denne uge' : 
               weekOffset === -1 ? 'Forrige uge' : 
               weekOffset < -1 ? `${Math.abs(weekOffset)} uger siden` :
               weekOffset === 1 ? 'Næste uge' :
               `${weekOffset} uger frem`}
            </Heading>
            
            <HStack gap={2}>
              <IconButton
                aria-label="Forrige uge"
                icon={<Text>←</Text>}
                size="sm"
                variant="outline"
                colorScheme="sage"
                onClick={goToPreviousWeek}
              />
              
              {weekOffset !== 0 && (
                <Button
                  size="sm"
                  variant="outline"
                  colorScheme="sage"
                  onClick={goToCurrentWeek}
                >
                  I dag
                </Button>
              )}
              
              <IconButton
                aria-label="Næste uge"
                icon={<Text>→</Text>}
                size="sm"
                variant="outline"
                colorScheme="sage"
                onClick={goToNextWeek}
                disabled={weekOffset >= 0} // Don't allow going into future
              />
            </HStack>
          </Flex>
          
          {/* Week Date Range */}
          <Text fontSize="sm" color="gray.600" textAlign="center">
            {weekDates[0].toLocaleDateString('da-DK', { day: 'numeric', month: 'short' })} - {weekDates[6].toLocaleDateString('da-DK', { day: 'numeric', month: 'short', year: 'numeric' })}
          </Text>
          
          {/* Week Grid */}
          <Grid templateColumns={isMobile ? "repeat(1, 1fr)" : "repeat(7, 1fr)"} gap={2}>
            {weekDates.map((date, index) => {
              const entry = getEntryForDate(date);
              const isToday = date.toDateString() === new Date().toDateString();
              const isPast = date <= new Date();
              const isClickable = isPast;
              
              return (
                <GridItem key={date.toISOString()}>
                  <Box
                    p={3}
                    border="1px solid"
                    borderColor={isToday ? "sage.300" : "gray.200"}
                    borderRadius="md"
                    bg={isToday ? "sage.50" : "white"}
                    minH="120px"
                    cursor={isClickable ? "pointer" : "default"}
                    _hover={isClickable ? { 
                      borderColor: "sage.400", 
                      bg: isToday ? "sage.100" : "sage.25",
                      transform: "translateY(-1px)",
                      boxShadow: "sm"
                    } : {}}
                    transition="all 0.2s"
                    onClick={isClickable ? () => handleDayClick(date) : undefined}
                    opacity={isPast ? 1 : 0.6}
                  >
                    <VStack gap={2} align="start">
                      <Text fontWeight="bold" fontSize="sm" color={isToday ? "sage.600" : "gray.600"}>
                        {dayNames[index]}
                      </Text>
                      <Text fontSize="xs" color="gray.500">
                        {date.getDate()}.{date.getMonth() + 1}
                      </Text>
                      
                      {entry ? (
                        <VStack gap={1} align="start" fontSize="xs">
                          <Text><strong>Puttetid:</strong> {formatTime(entry.puttetid)}</Text>
                          {entry.sovKl && <Text><strong>Sov kl:</strong> {formatTime(entry.sovKl)}</Text>}
                          {entry.vaagnede && <Text><strong>Vågnede:</strong> {formatTime(entry.vaagnede)}</Text>}
                          {entry.notes && (
                            <Text color="gray.600" fontSize="sm">
                              {entry.notes}
                            </Text>
                          )}
                        </VStack>
                      ) : (
                        <Text fontSize="xs" color="gray.400">
                          Ingen registrering
                        </Text>
                      )}
                    </VStack>
                  </Box>
                </GridItem>
              );
            })}
          </Grid>
        </VStack>

        {/* Record Today's Entry */}
        <VStack gap={4} align="stretch">
          <Heading size="md" color="gray.700">Registrer i dag</Heading>
          
          <Grid templateColumns={isMobile ? "1fr" : "repeat(3, 1fr)"} gap={4}>
            <VStack align="start" gap={2}>
              <Text fontSize="sm" fontWeight="medium">Puttetid *</Text>
              <Input
                type="time"
                value={puttetid}
                onChange={(e) => setPuttetid(e.target.value)}
                size="sm"
                borderColor="cream.300"
                borderRadius="lg"
                bg="cream.25"
                _focus={{ 
                  borderColor: "sage.400", 
                  boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                  bg: "white"
                }}
              />
            </VStack>
            
            <VStack align="start" gap={2}>
              <Text fontSize="sm" fontWeight="medium">Sov kl.</Text>
              <Input
                type="time"
                value={sovKl}
                onChange={(e) => setSovKl(e.target.value)}
                size="sm"
                borderColor="cream.300"
                borderRadius="lg"
                bg="cream.25"
                _focus={{ 
                  borderColor: "sage.400", 
                  boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                  bg: "white"
                }}
              />
            </VStack>
            
            <VStack align="start" gap={2}>
              <Text fontSize="sm" fontWeight="medium">Vågnede</Text>
              <Input
                type="time"
                value={vaagnede}
                onChange={(e) => setVaagnede(e.target.value)}
                size="sm"
                borderColor="cream.300"
                borderRadius="lg"
                bg="cream.25"
                _focus={{ 
                  borderColor: "sage.400", 
                  boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                  bg: "white"
                }}
              />
            </VStack>
          </Grid>
          
          <VStack align="start" gap={2}>
            <Text fontSize="sm" fontWeight="medium">Noter (valgfrit)</Text>
            <Textarea
              placeholder="Notater om sengetiden..."
              value={notes}
              onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => setNotes(e.target.value)}
              size="sm"
              rows={2}
              borderColor="cream.300"
              borderRadius="lg"
              bg="cream.25"
              _focus={{ 
                borderColor: "sage.400", 
                boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                bg: "white"
              }}
            />
          </VStack>

          <Button
            colorScheme="sage"
            onClick={handleRecordEntry}
            loading={loading}
            disabled={!puttetid.trim()}
          >
            Registrer sengetid
          </Button>
        </VStack>

        {/* Delete Confirmation Dialog */}
        <DialogManager
          trigger={<div style={{ display: 'none' }} />}
          title="Slet sengetider-værktøj"
          type="error"
          isOpen={showDeleteDialog}
          onOpenChange={setShowDeleteDialog}
          primaryAction={{
            label: deletingSengetider ? "Sletter..." : "Slet",
            onClick: handleDeleteSengetider,
            isLoading: deletingSengetider,
            colorScheme: "red"
          }}
          secondaryAction={{
            label: "Annuller",
            onClick: () => setShowDeleteDialog(false),
            colorScheme: "gray"
          }}
        >
          <Text>
            Er du sikker på, at du vil slette sengetider-værktøjet? 
            Alle registrerede sengetider vil også blive slettet.
          </Text>
          <Text mt={2} fontSize="sm" color="gray.600">
            Denne handling kan ikke fortrydes.
          </Text>
        </DialogManager>

        {/* Date Entry Dialog */}
        <DialogManager
          trigger={<div style={{ display: 'none' }} />}
          title={`Registrer sengetid${selectedDate ? ` - ${selectedDate.toLocaleDateString('da-DK')}` : ''}`}
          type="default"
          isOpen={showDateEntryDialog}
          onOpenChange={setShowDateEntryDialog}
          primaryAction={{
            label: dateEntryLoading ? "Registrerer..." : "Registrer",
            onClick: handleRecordDateEntry,
            isLoading: dateEntryLoading,
            colorScheme: "sage",
            disabled: !datePuttetid.trim()
          }}
          secondaryAction={{
            label: "Annuller",
            onClick: () => {
              setShowDateEntryDialog(false);
              setDatePuttetid('');
              setDateSovKl('');
              setDateVaagnede('');
              setDateNotes('');
            },
            colorScheme: "gray"
          }}
        >
          <VStack gap={4} align="stretch">
            <Grid templateColumns="repeat(1, 1fr)" gap={4}>
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Puttetid *</Text>
                <Input
                  type="time"
                  value={datePuttetid}
                  onChange={(e) => setDatePuttetid(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
              
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Sov kl.</Text>
                <Input
                  type="time"
                  value={dateSovKl}
                  onChange={(e) => setDateSovKl(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
              
              <VStack align="start" gap={2}>
                <Text fontSize="sm" fontWeight="medium">Vågnede</Text>
                <Input
                  type="time"
                  value={dateVaagnede}
                  onChange={(e) => setDateVaagnede(e.target.value)}
                  size="sm"
                  borderColor="cream.300"
                  borderRadius="lg"
                  bg="cream.25"
                  _focus={{ 
                    borderColor: "sage.400", 
                    boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                    bg: "white"
                  }}
                />
              </VStack>
            </Grid>
            
            <VStack align="start" gap={2}>
              <Text fontSize="sm" fontWeight="medium">Noter (valgfrit)</Text>
              <Textarea
                value={dateNotes}
                onChange={(e) => setDateNotes(e.target.value)}
                placeholder="Skriv eventuelle noter om søvnen..."
                size="sm"
                borderColor="cream.300"
                borderRadius="lg"
                bg="cream.25"
                _focus={{ 
                  borderColor: "sage.400", 
                  boxShadow: "0 0 0 3px rgba(129, 178, 154, 0.1)",
                  bg: "white"
                }}
                rows={3}
              />
            </VStack>
          </VStack>
        </DialogManager>
      </VStack>
    </Box>
  );
}
